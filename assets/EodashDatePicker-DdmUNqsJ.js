import{p as B,o as R,g as _,y as $,ay as F,c as f,r as I,d as x,a as H,b as p,az as j,aA as O,T as L,aB as Y,aC as N,aD as U,aE as z,aF as G,w as J,$ as w,a6 as K,aG as W,a1 as m,a3 as k,aH as q,F as Q,aI as C,aJ as S,a9 as y,aK as X,aL as Z,t as V,a0 as T,M as P,aM as tt,V as M,aN as et,aO as h}from"./index-MdPrjMvy.js";import{m as at,V as A}from"./VOverlay-CbXXnBbJ.js";import{b as nt,f as ot}from"./forwardRefs-CI9VyVID.js";import"./transition-CsMMQptl.js";const st=B({id:String,text:String,...R(at({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),rt=_()({name:"VTooltip",props:st(),emits:{"update:modelValue":t=>!0},setup(t,r){let{slots:i}=r;const e=$(t,"modelValue"),{scopeId:c}=nt(),l=F(),n=f(()=>t.id||`v-tooltip-${l}`),a=I(),o=f(()=>t.location.split(" ").length>1?t.location:t.location+" center"),s=f(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),u=f(()=>t.transition?t.transition:e.value?"scale-transition":"fade-transition"),g=f(()=>x({"aria-describedby":n.value},t.activatorProps));return H(()=>{const b=A.filterProps(t);return p(A,x({ref:a,class:["v-tooltip",t.class],style:t.style,id:n.value},b,{modelValue:e.value,"onUpdate:modelValue":d=>e.value=d,transition:u.value,absolute:!0,location:o.value,origin:s.value,persistent:!0,role:"tooltip",activatorProps:g.value,_disableGlobalStack:!0},c),{activator:i.activator,default:function(){for(var d=arguments.length,D=new Array(d),v=0;v<d;v++)D[v]=arguments[v];return i.default?.(...D)??t.text}})}),ot({},a)}});function it(t,r){const i=typeof t=="string"?j(t):t,e=lt(i,r);return{mounted:e,updated:e,unmounted(c){O(null,c)}}}function lt(t,r){return function(i,e,c){const l=typeof r=="function"?r(e):r,n=e.value?.text??e.value??l?.text,a=L(e.value)?e.value:{},o=()=>n??i.innerHTML,s=(c.ctx===e.instance.$?ct(c,e.instance.$)?.provides:c.ctx?.provides)??e.instance.$.provides,u=Y(t,x(l,a),o);u.appContext=Object.assign(Object.create(null),e.instance.$.appContext,{provides:s}),O(u,i)}}function ct(t,r){const i=new Set,e=l=>{for(const n of l){if(!n)continue;if(n===t)return!0;i.add(n);let a;if(n.suspense?a=e([n.ssContent]):Array.isArray(n.children)?a=e(n.children):n.component?.vnode&&(a=e([n.component?.subTree])),a)return a;i.delete(n)}return!1};if(!e([r.subTree]))throw new Error("Could not find original vnode");const c=Array.from(i).reverse();for(const l of c)if(l.component)return l.component;return r}const E=it(rt,t=>({activator:"parent",location:t.arg?.replace("-"," ")??"top",text:typeof t.value=="boolean"?void 0:t.value})),ut={class:"flex rounded-lg border border-gray-300 dark:border-gray-600",style:{margin:"2px"}},dt=["value"],ft={class:"w-full px-4 pb-3",style:{"font-size":"12px"}},mt=["innerHTML"],ht={__name:"EodashDatePicker",props:{hintText:{type:String,default:null}},setup(t){const r=N((n,a)=>({get(){return n(),new Date(C.value).getTime()},set(o){a(),S.debug("Datepicker setting currentDate",C.value),C.value=new Date(o).toISOString()}})),i=I({input:"YYYY-MM-DD"}),e=U([]),{selectedStac:c}=z(G());J(c,async(n,a)=>{if(n&&a?.id!==n.id){S.debug("Datepicker selected STAC change triggered");const o=["#009E73","#0072B2","#E69F00","#CC79A7","#56B4E9","#D55E00"];e.splice(0,e.length);for(let s=0;s<h.length;s++){S.debug("Retrieving dates",h[s]),await h[s].fetchCollection();const u=[...new Set(h[s].getItems()?.reduce((g,b)=>{const d=Date.parse(b.datetime);return d&&g.push(new Date(d)),g},[]))];e.push({key:"id-"+s.toString()+Math.random().toString(16).slice(2),bar:{style:{backgroundColor:o[s%o.length]}},dates:u,content:{style:{color:"#000000","font-weight":"bold"}}})}}},{immediate:!0});function l(n){if(e.length){let a=n?1/0:-1/0;e.forEach(o=>{o?.dates&&o.dates.forEach(s=>{s instanceof Date&&(a=Math[n?"min":"max"](a,s.getTime()))})}),r.value=a===-1/0?Date.now():a===1/0?0:a}}return(n,a)=>(w(),K(Q,null,[p(k(Z),{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=o=>r.value=o),modelModifiers:{number:!0},masks:i.value,attributes:e},W({default:m(({inputValue:o,inputEvents:s})=>[y("div",ut,[y("input",x({value:o},X(s,!0),{style:{margin:"1px"},class:"flex-grow px-1 py-1 bg-white dark:bg-gray-700"}),null,16,dt)])]),_:2},[t.hintText?{name:"footer",fn:m(()=>[y("div",ft,[y("span",{innerHTML:t.hintText},null,8,mt)])]),key:"0"}:void 0]),1032,["modelValue","masks","attributes"]),p(q,{align:"center",justify:"center",style:{"margin-top":"6px"}},{default:m(()=>[V((w(),T(M,{style:{padding:"0px","margin-right":"4px"},density:"compact",onClick:a[1]||(a[1]=o=>l(!0))},{default:m(()=>[p(P,{icon:[k(tt)]},null,8,["icon"])]),_:1})),[[E,"Set date to oldest available dataset","bottom"]]),V((w(),T(M,{style:{padding:"0px","margin-left":"4px"},density:"compact",onClick:a[2]||(a[2]=o=>l(!1))},{default:m(()=>[p(P,{icon:[k(et)]},null,8,["icon"])]),_:1})),[[E,"Set date to latest available dataset","bottom"]])]),_:1})],64))}};export{ht as default};
